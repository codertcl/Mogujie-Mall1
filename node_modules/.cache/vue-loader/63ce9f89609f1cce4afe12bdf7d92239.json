{"remainingRequest":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\src\\views\\category\\Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\src\\views\\category\\Category.vue","mtime":1599903017000},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619665387549},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619665387549},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport NavBar from \"@/components/common/navbar/NavBar\";\nimport Scroll from \"@/components/common/scroll/Scroll\";\nimport TabControl from \"@/components/content/tabControl/TabControl\";\n\nimport {getCategory, getSubCategory, getCategoryDetail} from \"@/network/category\";\nimport TabMenu from \"@/views/category/childComps/TabMenu\";\nimport TabContentCategory from \"@/views/category/childComps/TabContentCategory\";\nimport CategoryDetail from \"@/views/category/childComps/CategoryDetail\";\n\nexport default {\n  name: \"Category\",\n  components: {\n    NavBar,\n    TabMenu,\n    Scroll,\n    TabControl,\n    TabContentCategory,\n    CategoryDetail\n  },\n  data() {\n    return {\n      categories: [],\n      categoryData: {},\n      currentIndex: -1,\n      currentType: 'pop'\n    }\n  },\n  created() {\n    // 1.请求分类数据\n    this._getCategory()\n  },\n  computed: {\n    showSubcategory() {\n      if (this.currentIndex === -1) return {}\n      return this.categoryData[this.currentIndex].subcategories\n    },\n    showCategoryDetail() {\n      if (this.currentIndex === -1) return []\n      return this.categoryData[this.currentIndex].categoryDetail[this.currentType]\n    }\n  },\n  methods: {\n    _getCategory() {\n      getCategory().then(res => {\n        // 1.获取分类数据\n        this.categories = res.data.category.list\n        // 2.初始化每个类别的子数据\n        for (let i = 0; i < this.categories.length; i++) {\n          this.categoryData[i] = {\n            subcategories: {},\n            categoryDetail: {\n              'pop': [],\n              'new': [],\n              'sell': []\n            }\n          }\n        }\n        // 3.请求第一个分类的数据\n        this._getSubcategories(0)\n      })\n    },\n    _getSubcategories(index) {\n      this.currentIndex = index;\n      const mailKey = this.categories[index].maitKey;\n      getSubCategory(mailKey).then(res => {\n        this.categoryData[index].subcategories = res.data\n        this.categoryData = {...this.categoryData}\n        this._getCategoryDetail('pop')\n        this._getCategoryDetail('sell')\n        this._getCategoryDetail('new')\n      })\n    },\n    _getCategoryDetail(type) {\n      // 1.获取请求的miniWallkey\n      const miniWallkey = this.categories[this.currentIndex].miniWallkey;\n      // 2.发送请求,传入miniWallkey和type\n      getCategoryDetail(miniWallkey, type).then(res => {\n        // 3.将获取的数据保存下来\n        this.categoryData[this.currentIndex].categoryDetail[type] = res\n        this.categoryData = {...this.categoryData}\n      })\n    },\n    /**\n     * 事件响应相关的方法\n     */\n    selectItem(index) {\n      this._getSubcategories(index)\n    },\n    tabclick(index) {\n      switch (index) {\n        case 0 :\n          this.currentType = 'pop'\n          break\n        case 1:\n          this.currentType = 'new'\n          break\n        case 2:\n          this.currentType = 'sell'\n      }\n    }\n  }\n}\n\n",{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Category.vue","sourceRoot":"src\\views\\category","sourcesContent":["<template>\n  <div id=\"category\">\n    <nav-bar class=\"nav\">\n      <div slot=\"center\">商品分类</div>\n    </nav-bar>\n    <div class=\"content\">\n      <tab-menu :childcategories=\"categories\" @selectItem=\"selectItem\"></tab-menu>\n      <scroll id=\"tab-content\">\n        <div>\n          <tab-content-category :subcategories=\"showSubcategory\"></tab-content-category>\n          <tab-control :titles=\"['流行','新款','热门']\" @tabclick=\"tabclick\"></tab-control>\n          <category-detail :category-data=\"showCategoryDetail\"></category-detail>\n        </div>\n      </scroll>\n    </div>\n  </div>\n</template>\n\n<script>\nimport NavBar from \"@/components/common/navbar/NavBar\";\nimport Scroll from \"@/components/common/scroll/Scroll\";\nimport TabControl from \"@/components/content/tabControl/TabControl\";\n\nimport {getCategory, getSubCategory, getCategoryDetail} from \"@/network/category\";\nimport TabMenu from \"@/views/category/childComps/TabMenu\";\nimport TabContentCategory from \"@/views/category/childComps/TabContentCategory\";\nimport CategoryDetail from \"@/views/category/childComps/CategoryDetail\";\n\nexport default {\n  name: \"Category\",\n  components: {\n    NavBar,\n    TabMenu,\n    Scroll,\n    TabControl,\n    TabContentCategory,\n    CategoryDetail\n  },\n  data() {\n    return {\n      categories: [],\n      categoryData: {},\n      currentIndex: -1,\n      currentType: 'pop'\n    }\n  },\n  created() {\n    // 1.请求分类数据\n    this._getCategory()\n  },\n  computed: {\n    showSubcategory() {\n      if (this.currentIndex === -1) return {}\n      return this.categoryData[this.currentIndex].subcategories\n    },\n    showCategoryDetail() {\n      if (this.currentIndex === -1) return []\n      return this.categoryData[this.currentIndex].categoryDetail[this.currentType]\n    }\n  },\n  methods: {\n    _getCategory() {\n      getCategory().then(res => {\n        // 1.获取分类数据\n        this.categories = res.data.category.list\n        // 2.初始化每个类别的子数据\n        for (let i = 0; i < this.categories.length; i++) {\n          this.categoryData[i] = {\n            subcategories: {},\n            categoryDetail: {\n              'pop': [],\n              'new': [],\n              'sell': []\n            }\n          }\n        }\n        // 3.请求第一个分类的数据\n        this._getSubcategories(0)\n      })\n    },\n    _getSubcategories(index) {\n      this.currentIndex = index;\n      const mailKey = this.categories[index].maitKey;\n      getSubCategory(mailKey).then(res => {\n        this.categoryData[index].subcategories = res.data\n        this.categoryData = {...this.categoryData}\n        this._getCategoryDetail('pop')\n        this._getCategoryDetail('sell')\n        this._getCategoryDetail('new')\n      })\n    },\n    _getCategoryDetail(type) {\n      // 1.获取请求的miniWallkey\n      const miniWallkey = this.categories[this.currentIndex].miniWallkey;\n      // 2.发送请求,传入miniWallkey和type\n      getCategoryDetail(miniWallkey, type).then(res => {\n        // 3.将获取的数据保存下来\n        this.categoryData[this.currentIndex].categoryDetail[type] = res\n        this.categoryData = {...this.categoryData}\n      })\n    },\n    /**\n     * 事件响应相关的方法\n     */\n    selectItem(index) {\n      this._getSubcategories(index)\n    },\n    tabclick(index) {\n      switch (index) {\n        case 0 :\n          this.currentType = 'pop'\n          break\n        case 1:\n          this.currentType = 'new'\n          break\n        case 2:\n          this.currentType = 'sell'\n      }\n    }\n  }\n}\n\n</script>\n\n<style scoped>\n#category {\n  /*height: 100px;*/\n}\n\n.nav {\n  background-color: var(--color-tint);\n  font-weight: 700;\n  color: #fff;\n  box-sizing: border-box;\n}\n\n.content {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 44px;\n  bottom: 49px;\n  display: flex;\n  /*overflow: hidden;*/\n}\n\n#tab-content {\nheight: 800px;\nflex: 1;\noverflow: hidden;\n}\n</style>\n"]}]}