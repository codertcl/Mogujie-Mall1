{"remainingRequest":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\src\\views\\home\\Home.vue?vue&type=style&index=0&id=3dd2e005&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\src\\views\\home\\Home.vue","mtime":1599903017000},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619665387549},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.home-nav {\n  background-color: var(--color-tint);\n  color: white;\n  /*position: fixed;*/\n  /*  left: 0;*/\n  /*  top: 0;*/\n  /*  right: 0;*/\n  /*  z-index: 9;*/\n}\n\n#home {\n\n  height: 100vh;\n  position: relative;\n}\n\n/*.tabcontrol{*/\n/*  position: sticky;*/\n/*  top: 44px;*/\n/*  z-index: 9;*/\n/*}*/\n.content {\n  /*height: calc(100% - 50px);*/\n  /*overflow: hidden;*/\n  overflow: hidden;\n  position: absolute;\n  top: 44px;\n  bottom: 49px;\n  left: 0;\n  right: 0;\n\n}\n\n.tabcontrol {\n  position: relative;\n  z-index: 9;\n}\n\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src\\views\\home","sourcesContent":["<template>\n  <div id=\"home\">\n    <nav-bar class=\"home-nav\">\n      <div slot=\"center\">购物街</div>\n    </nav-bar>\n    <tab-control class=\"tabcontrol\"\n                 :titles=\"['流行','新款','精选']\"\n                 @tabclick=\"tabClick\"\n                 ref=\"tabcontrol1\"\n                 v-show=\"isTabFixed\">\n\n    </tab-control>\n\n    <scroll class=\"content\" ref=\"scroll\" :probe-type=\"3\"\n            @scroll=\"contentScroll\"\n            :pull-up-load=\"true\"\n            @loadMore=\"loadmore\">\n\n\n      <home-swiper :banners=\"banners\" @swiperload=\"swiperload\"ref=\"hSwiper\"></home-swiper>\n      <home-recommend :recommends=\"recommends\"></home-recommend>\n      <feature-view></feature-view>\n\n      <tab-control\n        :titles=\"['流行','新款','精选']\"\n        @tabclick=\"tabClick\"\n        ref=\"tabcontrol2\"></tab-control>\n      <goods-list :goods=\"showGoods\"></goods-list>\n    </scroll>\n\n    <back-top @click.native=\"backClick\" v-show=\"isShow\"></back-top>\n  </div>\n</template>\n\n<script>\nimport NavBar from \"@/components/common/navbar/NavBar\";\nimport Scroll from \"@/components/common/scroll/Scroll\";\nimport TabControl from \"@/components/content/tabControl/TabControl\";\nimport GoodsList from \"@/components/content/goods/GoodsList\";\nimport BackTop from \"@/components/content/backtop/BackTop\";\n\n\nimport HomeSwiper from \"@/views/home/childrenComps/HomeSwiper\";\nimport HomeRecommend from \"@/views/home/childrenComps/HomeRecommend\";\nimport FeatureView from \"@/views/home/childrenComps/FeatureView\";\n\n\nimport {getHomeMultidata, getHomeGoods} from \"@/network/home\";\nimport {debounce} from \"@/common/utils\";\n\n\nexport default {\n  name: \"Home\",\n  components: {\n    NavBar,\n    TabControl,\n    GoodsList,\n    Scroll,\n    BackTop,\n\n\n    HomeSwiper,\n    HomeRecommend,\n    FeatureView,\n\n  },\n  activated: function () {\n    this.$refs.hSwiper.startTimer()\n  },\n  deactivated: function () {\n    this.$refs.hSwiper.stopTimer()\n  },\n  data() {\n    return {\n      banners: [],\n      recommends: [],\n      goods: {\n        'pop': {page: 0, list: []},\n        'new': {page: 0, list: []},\n        'sell': {page: 0, list: []}\n      },\n      currentType: 'pop',\n      isShow: false,\n      tabOffSetTop: 0,\n      isTabFixed: false\n    }\n  },\n  computed: {\n    showGoods() {\n      return this.goods[this.currentType].list\n    }\n  },\n  mounted() {\n    //1.图片加载的事件监听和防抖函数\n    const refresh = debounce(this.$refs.scroll.refresh,)\n    this.$bus.$on('itemImageLoad', () => {\n      refresh()\n    })\n    //2.tabsettop\n    //所有组件都有一个属性$el,用于获取组件的元素\n  },\n  created() {\n    //1.请求多个数据\n    this.getHomeMultidata();\n    // 2.请求商品数据\n    this.getHomeGoods('pop')\n    this.getHomeGoods('new')\n    this.getHomeGoods('sell')\n\n  },\n  methods: {\n    //网络请求相关方法\n    getHomeMultidata() {\n      getHomeMultidata().then(res => {\n        console.log(res)\n        this.banners = res.data.banner.list;\n        this.recommends = res.data.recommend.list;\n\n      })\n    },\n    getHomeGoods(type) {\n      const page = this.goods[type].page + 1\n      getHomeGoods(type, page).then(res => {\n        this.goods[type].list.push(...res.data.list)\n        this.goods[type].page += 1\n\n        ///完成加载更多\n        this.$refs.scroll.finishPullUp()\n      })\n    },\n    //事件监听相关方法\n    tabClick(index) {\n\n      switch (index) {\n        case 0:\n          this.currentType = 'pop'\n          break\n        case 1:\n          this.currentType = 'new'\n          break\n        case 2:\n          this.currentType = 'sell'\n          break\n      }\n      this.$refs.tabcontrol1.currentIndex = index\n      this.$refs.tabcontrol2.currentIndex = index\n    },\n    backClick() {\n      this.$refs.scroll.scrollTo(0, 0, 500)\n    },\n    contentScroll(position) {\n      //1.判断backtop是否显示\n      this.isShow = (-position.y) > 1000\n      //2.判断tabcontrol是否吸顶\n      this.isTabFixed = (-position.y) > this.tabOffSetTop\n    },\n    loadmore() {\n      this.getHomeGoods(this.currentType)\n    },\n    swiperload() {\n      this.tabOffSetTop = this.$refs.tabcontrol2.$el.offsetTop\n    }\n\n  }\n}\n</script>\n\n<style scoped>\n.home-nav {\n  background-color: var(--color-tint);\n  color: white;\n  /*position: fixed;*/\n  /*  left: 0;*/\n  /*  top: 0;*/\n  /*  right: 0;*/\n  /*  z-index: 9;*/\n}\n\n#home {\n\n  height: 100vh;\n  position: relative;\n}\n\n/*.tabcontrol{*/\n/*  position: sticky;*/\n/*  top: 44px;*/\n/*  z-index: 9;*/\n/*}*/\n.content {\n  /*height: calc(100% - 50px);*/\n  /*overflow: hidden;*/\n  overflow: hidden;\n  position: absolute;\n  top: 44px;\n  bottom: 49px;\n  left: 0;\n  right: 0;\n\n}\n\n.tabcontrol {\n  position: relative;\n  z-index: 9;\n}\n\n</style>\n"]}]}