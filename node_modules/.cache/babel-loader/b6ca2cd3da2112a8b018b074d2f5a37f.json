{"remainingRequest":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\src\\views\\category\\Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\src\\views\\category\\Category.vue","mtime":1599903017000},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619665387549},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619665387549},{"path":"C:\\Users\\windows\\Desktop\\前端开发\\VUE\\supermall-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"C:\\\\Users\\\\windows\\\\Desktop\\\\\\u524D\\u7AEF\\u5F00\\u53D1\\\\VUE\\\\supermall-master\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport NavBar from \"@/components/common/navbar/NavBar\";\nimport Scroll from \"@/components/common/scroll/Scroll\";\nimport TabControl from \"@/components/content/tabControl/TabControl\";\nimport { getCategory, getSubCategory, getCategoryDetail } from \"@/network/category\";\nimport TabMenu from \"@/views/category/childComps/TabMenu\";\nimport TabContentCategory from \"@/views/category/childComps/TabContentCategory\";\nimport CategoryDetail from \"@/views/category/childComps/CategoryDetail\";\nexport default {\n  name: \"Category\",\n  components: {\n    NavBar: NavBar,\n    TabMenu: TabMenu,\n    Scroll: Scroll,\n    TabControl: TabControl,\n    TabContentCategory: TabContentCategory,\n    CategoryDetail: CategoryDetail\n  },\n  data: function data() {\n    return {\n      categories: [],\n      categoryData: {},\n      currentIndex: -1,\n      currentType: 'pop'\n    };\n  },\n  created: function created() {\n    // 1.请求分类数据\n    this._getCategory();\n  },\n  computed: {\n    showSubcategory: function showSubcategory() {\n      if (this.currentIndex === -1) return {};\n      return this.categoryData[this.currentIndex].subcategories;\n    },\n    showCategoryDetail: function showCategoryDetail() {\n      if (this.currentIndex === -1) return [];\n      return this.categoryData[this.currentIndex].categoryDetail[this.currentType];\n    }\n  },\n  methods: {\n    _getCategory: function _getCategory() {\n      var _this = this;\n\n      getCategory().then(function (res) {\n        // 1.获取分类数据\n        _this.categories = res.data.category.list; // 2.初始化每个类别的子数据\n\n        for (var i = 0; i < _this.categories.length; i++) {\n          _this.categoryData[i] = {\n            subcategories: {},\n            categoryDetail: {\n              'pop': [],\n              'new': [],\n              'sell': []\n            }\n          };\n        } // 3.请求第一个分类的数据\n\n\n        _this._getSubcategories(0);\n      });\n    },\n    _getSubcategories: function _getSubcategories(index) {\n      var _this2 = this;\n\n      this.currentIndex = index;\n      var mailKey = this.categories[index].maitKey;\n      getSubCategory(mailKey).then(function (res) {\n        _this2.categoryData[index].subcategories = res.data;\n        _this2.categoryData = _objectSpread({}, _this2.categoryData);\n\n        _this2._getCategoryDetail('pop');\n\n        _this2._getCategoryDetail('sell');\n\n        _this2._getCategoryDetail('new');\n      });\n    },\n    _getCategoryDetail: function _getCategoryDetail(type) {\n      var _this3 = this;\n\n      // 1.获取请求的miniWallkey\n      var miniWallkey = this.categories[this.currentIndex].miniWallkey; // 2.发送请求,传入miniWallkey和type\n\n      getCategoryDetail(miniWallkey, type).then(function (res) {\n        // 3.将获取的数据保存下来\n        _this3.categoryData[_this3.currentIndex].categoryDetail[type] = res;\n        _this3.categoryData = _objectSpread({}, _this3.categoryData);\n      });\n    },\n\n    /**\n     * 事件响应相关的方法\n     */\n    selectItem: function selectItem(index) {\n      this._getSubcategories(index);\n    },\n    tabclick: function tabclick(index) {\n      switch (index) {\n        case 0:\n          this.currentType = 'pop';\n          break;\n\n        case 1:\n          this.currentType = 'new';\n          break;\n\n        case 2:\n          this.currentType = 'sell';\n      }\n    }\n  }\n};",{"version":3,"sources":["Category.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"category\">\n    <nav-bar class=\"nav\">\n      <div slot=\"center\">商品分类</div>\n    </nav-bar>\n    <div class=\"content\">\n      <tab-menu :childcategories=\"categories\" @selectItem=\"selectItem\"></tab-menu>\n      <scroll id=\"tab-content\">\n        <div>\n          <tab-content-category :subcategories=\"showSubcategory\"></tab-content-category>\n          <tab-control :titles=\"['流行','新款','热门']\" @tabclick=\"tabclick\"></tab-control>\n          <category-detail :category-data=\"showCategoryDetail\"></category-detail>\n        </div>\n      </scroll>\n    </div>\n  </div>\n</template>\n\n<script>\nimport NavBar from \"@/components/common/navbar/NavBar\";\nimport Scroll from \"@/components/common/scroll/Scroll\";\nimport TabControl from \"@/components/content/tabControl/TabControl\";\n\nimport {getCategory, getSubCategory, getCategoryDetail} from \"@/network/category\";\nimport TabMenu from \"@/views/category/childComps/TabMenu\";\nimport TabContentCategory from \"@/views/category/childComps/TabContentCategory\";\nimport CategoryDetail from \"@/views/category/childComps/CategoryDetail\";\n\nexport default {\n  name: \"Category\",\n  components: {\n    NavBar,\n    TabMenu,\n    Scroll,\n    TabControl,\n    TabContentCategory,\n    CategoryDetail\n  },\n  data() {\n    return {\n      categories: [],\n      categoryData: {},\n      currentIndex: -1,\n      currentType: 'pop'\n    }\n  },\n  created() {\n    // 1.请求分类数据\n    this._getCategory()\n  },\n  computed: {\n    showSubcategory() {\n      if (this.currentIndex === -1) return {}\n      return this.categoryData[this.currentIndex].subcategories\n    },\n    showCategoryDetail() {\n      if (this.currentIndex === -1) return []\n      return this.categoryData[this.currentIndex].categoryDetail[this.currentType]\n    }\n  },\n  methods: {\n    _getCategory() {\n      getCategory().then(res => {\n        // 1.获取分类数据\n        this.categories = res.data.category.list\n        // 2.初始化每个类别的子数据\n        for (let i = 0; i < this.categories.length; i++) {\n          this.categoryData[i] = {\n            subcategories: {},\n            categoryDetail: {\n              'pop': [],\n              'new': [],\n              'sell': []\n            }\n          }\n        }\n        // 3.请求第一个分类的数据\n        this._getSubcategories(0)\n      })\n    },\n    _getSubcategories(index) {\n      this.currentIndex = index;\n      const mailKey = this.categories[index].maitKey;\n      getSubCategory(mailKey).then(res => {\n        this.categoryData[index].subcategories = res.data\n        this.categoryData = {...this.categoryData}\n        this._getCategoryDetail('pop')\n        this._getCategoryDetail('sell')\n        this._getCategoryDetail('new')\n      })\n    },\n    _getCategoryDetail(type) {\n      // 1.获取请求的miniWallkey\n      const miniWallkey = this.categories[this.currentIndex].miniWallkey;\n      // 2.发送请求,传入miniWallkey和type\n      getCategoryDetail(miniWallkey, type).then(res => {\n        // 3.将获取的数据保存下来\n        this.categoryData[this.currentIndex].categoryDetail[type] = res\n        this.categoryData = {...this.categoryData}\n      })\n    },\n    /**\n     * 事件响应相关的方法\n     */\n    selectItem(index) {\n      this._getSubcategories(index)\n    },\n    tabclick(index) {\n      switch (index) {\n        case 0 :\n          this.currentType = 'pop'\n          break\n        case 1:\n          this.currentType = 'new'\n          break\n        case 2:\n          this.currentType = 'sell'\n      }\n    }\n  }\n}\n\n</script>\n\n<style scoped>\n#category {\n  /*height: 100px;*/\n}\n\n.nav {\n  background-color: var(--color-tint);\n  font-weight: 700;\n  color: #fff;\n  box-sizing: border-box;\n}\n\n.content {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 44px;\n  bottom: 49px;\n  display: flex;\n  /*overflow: hidden;*/\n}\n\n#tab-content {\nheight: 800px;\nflex: 1;\noverflow: hidden;\n}\n</style>\n"],"sourceRoot":"src\\views\\category"}]}